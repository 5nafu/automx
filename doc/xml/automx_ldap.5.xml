<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<refentry>
  <refentryinfo>
    <title>automx_ldap</title>

    <authorgroup>
      <author>
        <firstname>Christian</firstname>

        <surname>Roessner</surname>

        <contrib>Wrote the program.</contrib>

        <email>c@roessner-network-solutions.com</email>
      </author>

      <editor>
        <firstname>Patrick</firstname>

        <othername>Ben</othername>

        <surname>Koetter</surname>

        <contrib>Wrote the documentation.</contrib>

        <email>p@state-of-mind.de</email>
      </editor>
    </authorgroup>
  </refentryinfo>

  <refmeta>
    <refentrytitle>automx_ldap</refentrytitle>

    <manvolnum>5</manvolnum>

    <refmiscinfo>Version 0.8_beta1</refmiscinfo>

    <refmiscinfo>automx Manual</refmiscinfo>
  </refmeta>

  <refnamediv>
    <refname><filename>automx_ldap</filename></refname>

    <refpurpose>automx LDAP backend configuration parameters</refpurpose>
  </refnamediv>

  <refsection>
    <title>Description</title>

    <para>The <citerefentry>
        <refentrytitle>automx_ldap</refentrytitle>

        <manvolnum>5</manvolnum>
      </citerefentry> man page specifies all parameters that control access
    from within <systemitem class="service">automx</systemitem> to a LDAP
    backend.</para>
  </refsection>

  <refsection>
    <title id="parameters">Parameters</title>

    <variablelist>
      <varlistentry>
        <term><parameter>authzid</parameter> (no default)</term>

        <listitem>
          <para>Specifies the SASL proxy authorization identity.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>base</parameter> (default: none)</term>

        <listitem>
          <para>Specifies the default base DN to use when performing ldap
          operations. The base must be specified as a Distinguished Name in
          LDAP format.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>binddn</parameter> (default: none)</term>

        <listitem>
          <para>Specifies the default bind DN to use when performing ldap
          operations. The bind DN must be specified as a Distinguished Name in
          LDAP format.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>bindmethod</parameter> (default:
        <option>simple</option>)</term>

        <listitem>
          <para>Specifies how authentication should take place. Valid options
          are either <option>simple</option> for a simple bind or
          <option>sasl</option> for a bind that requires SASL
          authentication.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>bindpw</parameter> (default: none)</term>

        <listitem>
          <para>Specifies the password used when <parameter>binddn</parameter>
          identifies itself with the LDAP server.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>cacert</parameter> (default: none)</term>

        <listitem>
          <para>Specifies the path to a file that contains all certificates of
          Certification Authorities automx should trust.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>cert</parameter> (default: none)</term>

        <listitem>
          <para>Specifies the path to a file that contains automx's
          certificate.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>cipher</parameter> (default:
        <option>TLSv1</option>)</term>

        <listitem>
          <para>See <citerefentry>
              <refentrytitle>ciphers</refentrytitle>

              <manvolnum>1</manvolnum>
            </citerefentry> for a list of valid options.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>filter</parameter> (default:
        <option>(objectClass=*)</option>)</term>

        <listitem>
          <para>Specifies the search filter to select appropriate LDAP
          objects. The filter should conform to the string representation for
          search filters as defined in RFC 4515.</para>

          <note>
            <para>See the section <quote>Macros and Variables</quote> in
            <citerefentry>
                <refentrytitle>automx.conf</refentrytitle>

                <manvolnum>5</manvolnum>
              </citerefentry> for a list of available query macros.</para>
          </note>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>host</parameter> (default:
        <option>ldap://127.0.0.1/</option>)</term>

        <listitem>
          <para>Specifies one or more LDAP servers separated by commas as
          shown in the following example:</para>

          <programlisting>host = ldap://127.0.0.1, ldap://192.168.2.1</programlisting>

          <important>
            <title>Listing two and more servers</title>

            <para>Subsequent servers to the first serve <emphasis>only for
            fallback purposes</emphasis>, i.e. a server to the right will only
            be queried if the server left to it cannot be reached. If a server
            can be reached no further attempts will be made regardless if the
            query returned a result or not.</para>
          </important>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>key</parameter> (default: none)</term>

        <listitem>
          <para>Specifies the path to a file that contains automx's private
          key, which matches automx certificate given with
          <parameter>cert</parameter>.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>reqcert</parameter> (default:
        <option>never</option>)</term>

        <listitem>
          <para>Specifies what checks to perform on server certificates in a
          TLS session, if any. The &lt;level&gt; can be specified as one of
          the following keywords:</para>

          <variablelist>
            <varlistentry>
              <term>never</term>

              <listitem>
                <para>The client will not request or check any server
                certificate. This is the default setting.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>allow</term>

              <listitem>
                <para>The server certificate is requested. If no certificate
                is provided, the session proceeds normally. If a bad
                certificate is provided, it will be ignored and the session
                proceeds normally.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>try</term>

              <listitem>
                <para>The server certificate is requested. If no certificate
                is provided, the session proceeds normally. If a bad
                certificate is provided, the session is immediately
                terminated.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>demand</term>

              <listitem>
                <para>These keywords are equivalent. The server certificate is
                requested. If no certificate is provided, or a bad certificate
                is provided, the session is immediately terminated.</para>
              </listitem>
            </varlistentry>
          </variablelist>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>result_attrs</parameter> (default: none)</term>

        <listitem>
          <para>If automx finds one or more entries, the attributes specified
          by result_attrs are returned. If * is listed, all user attributes
          are returned.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>saslmech</parameter> (default: none)</term>

        <listitem>
          <para>Specifies the SASL mechanism to be used for
          authentication.</para>

          <variablelist>
            <varlistentry>
              <term>cram-md5</term>

              <listitem>
                <para>The SASL <option>cram-md5</option> mechanism (see:
                <ulink url="http://tools.ietf.org/rfc/rfc2195.txt">RFC
                2195</ulink>) will be used to authenticate LDAP bind
                requests.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>digest-md5</term>

              <listitem>
                <para>The SASL <option>digest-md5</option> mechanism (see:
                <ulink url="http://www.ietf.org/rfc/rfc2831.txt">RFC
                2831</ulink>) will be used to authenticate LDAP bind
                requests.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>external</term>

              <listitem>
                <para>The SASL <option>external</option> mechanism (see:
                <ulink url="http://tools.ietf.org/rfc/rfc4422.txt">RFC
                4422</ulink>) will be used to authenticate LDAP bind
                requests.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>gssapi</term>

              <listitem>
                <para>The SASL <option>gssapi</option> mechanism (see: <ulink
                url="http://www.ietf.org/rfc/rfc4752.txt">RFC 4752</ulink>)
                will be used to authenticate LDAP bind requests.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>none</term>

              <listitem>
                <para>No SASL mechanism will be use to authenticate LDAP bind
                requests.</para>
              </listitem>
            </varlistentry>
          </variablelist>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>scope</parameter> (default:
        <option>sub</option>)</term>

        <listitem>
          <para>Specify the scope of the search to be one of
          <option>base</option> (or <option>exact</option>),
          <option>one</option> (or <option>onelevel</option>),
          <option>sub</option> (or <option>substree</option>), to specify a
          base object, one-level, or subtree search.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>usetls</parameter> (default:
        <option>false</option>)</term>

        <listitem>
          <para>Specifies if automx should use TLS when it connects to the
          LDAP host.</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </refsection>

  <refsection>
    <title>See also</title>

    <para><citerefentry>
        <refentrytitle>automx</refentrytitle>

        <manvolnum>8</manvolnum>
      </citerefentry>, <citerefentry>
        <refentrytitle>automx.conf</refentrytitle>

        <manvolnum>5</manvolnum>
      </citerefentry>, <citerefentry>
        <refentrytitle>automx_ldap</refentrytitle>

        <manvolnum>5</manvolnum>
      </citerefentry>, <citerefentry>
        <refentrytitle>automx_sql</refentrytitle>

        <manvolnum>5</manvolnum>
      </citerefentry>, <citerefentry>
        <refentrytitle>automx-test</refentrytitle>

        <manvolnum>1</manvolnum>
      </citerefentry></para>
  </refsection>
</refentry>
